import jQuery from "jquery";

(function ($) {
  "use strict";
  $.fn.meanmenu = function (e) {
    var n = {
      meanMenuTarget: $(this),
      meanMenuContainer: ".mobile-responsive-menu",
      meanMenuClose: "X",
      meanMenuCloseSize: "18px",
      meanMenuOpen: "<span /><span /><span />",
      meanRevealPosition: "right",
      meanRevealPositionDistance: "0",
      meanRevealColour: "",
      meanScreenWidth: "480",
      meanNavPush: "",
      meanShowChildren: true,
      meanExpandableChildren: true,
      meanExpand: "+",
      meanContract: "-",
      meanRemoveAttrs: false,
      onePage: false,
      meanDisplay: "block",
      removeElements: "",
    };
    e = $.extend(n, e);
    var a = window.innerWidth || document.documentElement.clientWidth;
    return this.each(function () {
      var n = e.meanMenuTarget,
        t = e.meanMenuContainer,
        r = e.meanMenuClose,
        i = e.meanMenuCloseSize,
        s = e.meanMenuOpen,
        u = e.meanRevealPosition,
        m = e.meanRevealPositionDistance,
        l = e.meanRevealColour,
        o = e.meanScreenWidth,
        c = e.meanNavPush,
        v = ".meanmenu-reveal",
        h = e.meanShowChildren,
        d = e.meanExpandableChildren,
        y = e.meanExpand,
        j = e.meanContract,
        Q = e.meanRemoveAttrs,
        f = e.onePage,
        g = e.meanDisplay,
        p = e.removeElements,
        C = false;
      if (
        /iPhone|iPad|iPod|Android|BlackBerry|Windows Phone/i.test(
          navigator.userAgent
        )
      ) {
        C = true;
      }
      if (
        /MSIE 8|MSIE 7/i.test(navigator.userAgent) &&
        document.querySelector("html").style.overflowY !== "hidden"
      ) {
        document.querySelector("html").style.overflowY = "scroll";
      }
      var w = "",
        x = function () {
          if (u === "center") {
            var e = window.innerWidth || document.documentElement.clientWidth,
              n = e / 2 - 22 + "px";
              if (C) {
                jQuery(".meanmenu-reveal").animate({ left: n });
              } else {
                jQuery(".meanmenu-reveal").css("left", n);
              }
              
          }
        },
        A = false,
        E = false;
      if (u === "right") {
        w = "right:" + m + ";left:auto;";
      }
      if (u === "left") {
        w = "left:" + m + ";right:auto;";
      }
      x();
      var M = "",
        P = function () {
          M.html($(M).is(".meanmenu-reveal.meanclose") ? r : s);
        },
        W = function () {
          $(".mean-bar,.mean-push").remove(),
            $(t).removeClass("mean-container"),
            $(n).css("display", g),
            (A = false),
            (E = false),
            $(p).removeClass("mean-remove");
        },
        b = function () {
          var e = "background:" + l + ";color:" + l + ";" + w;
          if (o >= a) {
            $(p).addClass("mean-remove"),
              (E = true),
              $(t).addClass("mean-container"),
              $(".mean-container").prepend(
                '<div class="mean-bar"><a href="#nav" class="meanmenu-reveal" style="' +
                  e +
                  '">Show Navigation</a><nav class="mean-nav"></nav></div>'
              );
            var r = $(n).html();
            $(".mean-nav").html(r),
              Q &&
                $("nav.mean-nav ul, nav.mean-nav ul *").each(function () {
                  $(this).is(".mean-remove")
                    ? $(this).attr("class", "mean-remove")
                    : $(this).removeAttr("class"),
                    $(this).removeAttr("id");
                }),
              $(n).before('<div class="mean-push" />'),
              $(".mean-push").css("margin-top", c),
              $(n).hide(),
              $(".meanmenu-reveal").show(),
              $(v).html(s),
              (M = $(v)),
              $(".mean-nav ul").hide(),
              h
                ? d
                  ? ($(".mean-nav ul ul").each(function () {
                      $(this).children().length &&
                        $(this, "li:first")
                          .parent()
                          .append(
                            '<a class="mean-expand" href="#" style="font-size: ' +
                              i +
                              '">' +
                              y +
                              "</a>"
                          );
                    }),
                    $(".mean-expand").on("click", function (e) {
                      e.preventDefault(),
                        $(this).hasClass("mean-clicked")
                          ? ($(this).text(y),
                            $(this)
                              .prev("ul")
                              .slideUp(300, function () {}))
                          : ($(this).text(j),
                            $(this)
                              .prev("ul")
                              .slideDown(300, function () {})),
                        $(this).toggleClass("mean-clicked");
                    }))
                  : $(".mean-nav ul ul").show()
                : $(".mean-nav ul ul").hide(),
              $(".mean-nav ul li").last().addClass("mean-last"),
              M.removeClass("meanclose"),
              $(M).click(function (e) {
                e.preventDefault(),
                  A === !1
                    ? (M.css("text-align", "center"),
                      M.css("text-indent", "0"),
                      M.css("font-size", i),
                      $(".mean-nav ul:first").slideDown(),
                      (A = true))
                    : ($(".mean-nav ul:first").slideUp(), (A = false)),
                  M.toggleClass("meanclose"),
                  P(),
                  $(p).addClass("mean-remove");
              }),
              f &&
                $(".mean-nav ul > li > a:first-child").on(
                  "click",
                  function () {
                    $(".mean-nav ul:first").slideUp(),
                      (A = false),
                      $(M).toggleClass("meanclose").html(s);
                  }
                );
          } else W();
        };
      if (!C) {
        $(window).resize(function () {
          a = window.innerWidth || document.documentElement.clientWidth;
          if (a > o) {
            W();
          } else {
            o >= a ? (b(), x()) : W();
          }
        });
      }
      $(window).resize(function () {
        a = window.innerWidth || document.documentElement.clientWidth;
        if (C) {
          x();
          if (o >= a) {
            if (E === !1) {
              b();
            }
          } else {
            W();
          }
        } else {
          W();
          if (o >= a) {
            b();
            x();
          }
        }
      });
      b();
    });
  };
})(jQuery);
